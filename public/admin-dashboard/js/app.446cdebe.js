(function(t){function e(e){for(var o,s,i=e[0],l=e[1],c=e[2],d=0,p=[];d<i.length;d++)s=i[d],n[s]&&p.push(n[s][0]),n[s]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],o=!0,i=1;i<a.length;i++){var l=a[i];0!==n[l]&&(o=!1)}o&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var o={},n={app:0},r=[];function s(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=o,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(a,o,function(e){return t[e]}.bind(null,o));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/admin/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0b3a":function(t,e,a){"use strict";var o=a("fda6"),n=a.n(o);n.a},"12c4":function(t,e,a){},"1b69":function(t,e,a){"use strict";var o=a("5746"),n=a.n(o);n.a},"34bd":function(t,e,a){},"3a4f":function(t,e,a){"use strict";var o=a("12c4"),n=a.n(o);n.a},"502a":function(t,e,a){"use strict";var o=a("cc19"),n=a.n(o);n.a},"513e":function(t,e,a){"use strict";var o=a("b688"),n=a.n(o);n.a},5654:function(t,e,a){"use strict";var o=a("f359"),n=a.n(o);n.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var o=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("el-container",{staticClass:"app-container"},[a("el-aside",{attrs:{width:"280px"}},[a("Navbar")],1),a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"element-loading-text":"Loading...","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("router-view",{on:{"set-loading":function(e){return t.setLoading()},"stop-loading":function(e){return t.stopLoading()}}})],1)],1)],1)},r=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"navbar"},[a("el-row",{staticClass:"tac"},[a("el-col",{attrs:{span:24}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1"},on:{open:t.handleOpen,close:t.handleClose}},[a("router-link",{attrs:{to:"/"}},[a("el-menu-item",{attrs:{index:"1"}},[a("i",{staticClass:"el-icon-data-analysis"}),a("span",[t._v("Dashboard")])])],1),a("router-link",{attrs:{to:"/search"}},[a("el-menu-item",{attrs:{index:"3"}},[a("i",{staticClass:"el-icon-search"}),a("span",[t._v("Search")])])],1),a("el-menu-item",{attrs:{index:"2"}},[a("i",{staticClass:"el-icon-user"}),a("span",[t._v("Customers")])]),a("router-link",{attrs:{to:"/products"}},[a("el-menu-item",{attrs:{index:"4"}},[a("i",{staticClass:"el-icon-goods"}),a("span",[t._v("Products")])])],1),a("router-link",{attrs:{to:"/inventory"}},[a("el-menu-item",{attrs:{index:"5"}},[a("i",{staticClass:"el-icon-box"}),a("span",[t._v("Stock Management")])])],1),a("router-link",{attrs:{to:"/promotions"}},[a("el-menu-item",{attrs:{index:"6"}},[a("i",{staticClass:"el-icon-discount"}),a("span",[t._v("Promotions & Discounts")])])],1),a("el-submenu",{attrs:{index:"7"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-truck"}),a("span",[t._v("Orders")])]),a("router-link",{attrs:{to:"/fulfillment"}},[a("el-menu-item",{attrs:{index:"1-1"}},[a("i",{staticClass:"el-icon-magic-stick"}),t._v("Fulfillment wizard")])],1),a("router-link",{attrs:{to:"/orders"}},[a("el-menu-item",{attrs:{index:"1-2"}},[a("i",{staticClass:"el-icon-s-order"}),t._v("All orders")])],1)],2),a("router-link",{attrs:{to:"/setup"}},[a("el-menu-item",{attrs:{index:"8"}},[a("i",{staticClass:"el-icon-s-tools"}),a("span",[t._v("Setup")])])],1)],1)],1)],1)],1)},i=[],l={name:"navbar",data:function(){return{isCollapse:!1}},methods:{handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)}}},c=l,u=a("2877"),d=Object(u["a"])(c,s,i,!1,null,null,null),p=d.exports,m={components:{Navbar:p},data:function(){return{loading:!1,stopLoad:!1}},methods:{stopLoading:function(){this.stopLoad=!0,this.loading=!1},setLoading:function(){var t=this;this.stopLoad=!1,window.setTimeout(function(){!1===t.stopLoad&&(t.loading=!0)},1e3)}}},h=m,g=(a("5c0b"),Object(u["a"])(h,n,r,!1,null,null,null)),f=g.exports,y=a("8c4f"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard"})},b=[],w={name:"dashboard"},_=w,k=Object(u["a"])(_,v,b,!1,null,null,null),C=k.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"products"},[a("h1",{staticClass:"title title--primary"},[t._v("Products")]),a("h3",{staticClass:"title title--secondary"},[t._v("Filter products")]),a("div",{staticClass:"options"},[a("div",{staticClass:"filters"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"Category"}},[a("el-select",{attrs:{multiple:"",placeholder:"Select categories"},on:{change:function(e){return t.getProducts()}},model:{value:t.selectedCategories,callback:function(e){t.selectedCategories=e},expression:"selectedCategories"}},t._l(t.categories,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t._id}})}),1)],1),a("el-form-item",{attrs:{label:"Price range"}},[a("el-slider",{attrs:{range:"",step:5,max:500},on:{change:function(e){return t.getProducts()}},model:{value:t.priceRange,callback:function(e){t.priceRange=e},expression:"priceRange"}})],1)],1)],1),a("router-link",{attrs:{to:"/products/new"}},[a("el-button",{attrs:{rounded:"",type:"success"}},[t._v("New Product")])],1)],1),t.products.length>0?a("ProductGrid",{attrs:{products:t.products},on:{reload:function(e){return t.getProducts()}}}):a("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center","padding-top":"70px"}},[a("p",{staticClass:"title title--secondary"},[t._v("Whoops, no products found")])]),a("el-pagination",{attrs:{layout:"prev, pager, next","hide-on-single-page":!0,"page-count":t.totalPages},on:{"current-change":function(e){t.page=e-1}}})],1)},$=[],S=(a("ac6a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product-grid"},[a("el-container",t._l(t.products,function(e,o){return a("el-col",{key:o,attrs:{xs:24,sm:12,md:12,lg:6,xl:4}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("div",{staticClass:"live-status"},[a("el-switch",{attrs:{"inactive-text":"Disabled","active-text":"Live"},on:{change:function(a){return t.updateLive(a,e)}},model:{value:e.live,callback:function(a){t.$set(e,"live",a)},expression:"product.live"}})],1),e.content.images.length>0?a("el-carousel",{attrs:{height:"250px",autoplay:!1}},t._l(e.content.images,function(t,e){return a("el-carousel-item",{key:e},[a("img",{staticClass:"image",attrs:{src:t.path}})])}),1):a("PlaceholderImage",{attrs:{height:"250px"}}),a("div",{staticClass:"card__content"},[a("router-link",{attrs:{to:"/products/"+e._id}},[a("h2",[t._v(t._s(e.content.name))])]),a("div",{staticClass:"category"},[a("h3",[t._v(t._s(e.category.name))]),a("p",[t._v("£"+t._s(e.inventory.price))])]),a("p",[t._v("Current available stock: "+t._s(e.inventory.totalStock-e.inventory.inFulfillment))]),a("div",{staticClass:"bottom clearfix"},[a("el-row",[a("router-link",{attrs:{to:"/products/"+e._id}},[a("el-button",{attrs:{size:"small",icon:"el-icon-edit",round:""}},[t._v("Edit")])],1),a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",round:""},on:{click:function(e){t.deleting=!0}}},[t._v("Delete")]),a("el-dialog",{attrs:{visible:t.deleting,width:"30%","before-close":t.deleteProduct},on:{"update:visible":function(e){t.deleting=e}}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("Permenantly delete "),a("strong",[t._v(t._s(e.content.name))]),t._v("?")]),a("span",[t._v('Are you sure you want to permentantly remove this product from the site? This will remove all data about the product from the database, and is irreversible. To remove the product with the option to relist it later, use the "disable" switch instead.')]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.deleting=!1}}},[t._v("Cancel")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.deleteProduct(e,o)}}},[t._v("Permenantly delete")])],1)])],1)],1)],1)],1)],1)}),1)],1)}),P=[],F=(a("7f7f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"placeholder-image",style:{height:t.height}},[a("i",{staticClass:"el-icon-picture-outline"})])}),j=[],A={name:"placeholder-image",props:["height"]},D=A,N=(a("764c"),Object(u["a"])(D,F,j,!1,null,"3b715371",null)),E=N.exports,O={name:"product-grid",props:["products","loading"],data:function(){return{deleting:!1}},components:{PlaceholderImage:E},methods:{deleteProduct:function(t,e){var a=this;console.log("deleting"),this.$axios.delete("/products/"+t._id).then(function(e){console.log(e),a.$emit("reload"),a.$message.success("Permenantly deleted "+t.content.name)}).catch(function(e){console.log(e),a.$message.error("Error deleting "+t.content.name+". Please contact your system administrator.")}),this.deleting=!1},updateLive:function(t,e){var a=this;this.$axios.put("/products/"+e._id,{toUpdate:"live",updateWith:t}).then(function(e){var o=t?"Made live - Product is now visible and available to purchase on customer facing site. To reverse this action, click the slider again.":"Product removed from customer facing site. This item can no longer be added to cart. Any in-cart or completed orders are unaffected. You can reenable it at any time.";a.$message.success(o)}).catch(function(t){a.$message.error("Failed to update product status")})}}},R=O,T=(a("5763"),Object(u["a"])(R,S,P,!1,null,"2af8c708",null)),I=T.exports,M={name:"products",data:function(){return{selectedCategories:[],categories:[],priceRange:[0,500],products:[],totalPages:null,page:0}},components:{ProductGrid:I},watch:{page:function(){this.getProducts()}},mounted:function(){this.$emit("set-loading"),this.getProducts(!0)},methods:{getProducts:function(t){var e=this,a="?page="+this.page;this.selectedCategories.forEach(function(t){a=a+"&category="+t}),a=a+"&price="+this.priceRange[0]+"&price="+this.priceRange[1],this.$axios.get("/products"+a).then(function(a){console.log(a),t&&(e.categories=a.data.categories,e.selectedCategories=a.data.categories.map(function(t){return t._id})),e.products=a.data.products,e.totalPages=a.data.pages,window.document.getElementsByClassName("el-main")[0].scroll(0,0),e.$emit("stop-loading")}).catch(function(){e.$message.error("Error loading products. Please contact system administrator"),e.$emit("stop-loading")})}}},U=M,L=(a("513e"),Object(u["a"])(U,x,$,!1,null,null,null)),W=L.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"new-product"},[a("el-page-header",{attrs:{title:"back to all products",content:"New product"},on:{back:function(e){return t.$router.push("/products")}}}),a("h1",{staticClass:"title title--primary"},[t._v("Launch new product")]),a("el-form",{ref:"productForm",attrs:{"label-position":"top",model:t.productForm,rules:t.productFormRules}},[a("el-form-item",{attrs:{label:"Category",prop:"category"}},[a("el-select",{attrs:{placeholder:"Select categories"},model:{value:t.productForm.category,callback:function(e){t.$set(t.productForm,"category",e)},expression:"productForm.category"}},t._l(t.categories,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t._id}})}),1),a("el-button",{staticStyle:{"margin-left":"20px"},on:{click:function(e){t.showNewCategoryForm=!0}}},[t._v("Or create a new category")])],1),a("NewCategoryForm",{attrs:{show:t.showNewCategoryForm},on:{created:function(e){return t.createdCategory(e)},discard:function(e){t.showNewCategoryForm=!1}}}),a("el-form-item",{attrs:{label:"Product name",prop:"name"}},[a("el-input",{attrs:{placeholder:"Choose a name"},model:{value:t.productForm.name,callback:function(e){t.$set(t.productForm,"name",e)},expression:"productForm.name"}})],1),a("el-form-item",{attrs:{label:"Url reference",prop:"slug"}},[a("el-input",{attrs:{placeholder:"Choose a url reference"},model:{value:t.productForm.slug,callback:function(e){t.$set(t.productForm,"slug",e)},expression:"productForm.slug"}})],1),a("el-form-item",{attrs:{label:"Product description",prop:"description"}},[a("el-input",{attrs:{type:"textarea",placeholder:"Write a detailed description"},model:{value:t.productForm.description,callback:function(e){t.$set(t.productForm,"description",e)},expression:"productForm.description"}})],1),a("el-form-item",{attrs:{label:"Product images"}},[a("ImageUpload",{on:{finishedUpload:function(e){return t.updateProductImages(e)}}})],1),a("h3",[t._v("Pricing and fulfillment")]),a("el-form-item",{attrs:{label:"Price",prop:"price"}},[t._v("\n            £ "),a("el-input-number",{attrs:{controls:!1,precision:2},model:{value:t.productForm.price,callback:function(e){t.$set(t.productForm,"price",e)},expression:"productForm.price"}})],1),a("el-form-item",{attrs:{label:"Initial stock quantity (can be left as zero and added later if needed)",prop:"stock"}},[a("el-input-number",{attrs:{controls:!1,step:1,precision:0},model:{value:t.productForm.stock,callback:function(e){t.$set(t.productForm,"stock",e)},expression:"productForm.stock"}})],1),t.errors?a("el-alert",{attrs:{title:"Whoops",description:"Please correct the errors above",type:"error","show-icon":""}}):t._e(),a("el-form-item",{staticStyle:{"margin-top":"40px"}},[a("el-button",{attrs:{type:"success",loading:t.launchingProduct},on:{click:function(e){return t.submitForm("productForm")}}},[t._v("Launch product")]),a("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.discardProduct()}}},[t._v("Cancel - discard product")])],1)],1)],1)},B=[],q=(a("a481"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"image-upload"},[a("el-upload",{staticClass:"image-upload",attrs:{drag:"",action:"/api/admin/images","on-success":t.finishedUpload,multiple:"",limit:5,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("Click to upload")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("jpg/png files with a size less than 500kb")])],1)],1)}),H=[],Y={name:"image-upload",methods:{finishedUpload:function(t){this.$emit("finishedUpload",t)}}},G=Y,J=Object(u["a"])(G,q,H,!1,null,null,null),K=J.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"new-category-form"},[a("el-dialog",{attrs:{title:"New category",visible:t.show},on:{"update:visible":function(e){t.show=e}}},[a("el-form",{ref:"newCategoryForm",attrs:{model:t.newCategoryForm,rules:t.newCategoryFormRules}},[a("el-form-item",{staticStyle:{display:"flex"},attrs:{label:"Category name ",prop:"name"}},[a("el-input",{model:{value:t.newCategoryForm.name,callback:function(e){t.$set(t.newCategoryForm,"name",e)},expression:"newCategoryForm.name"}})],1),a("el-form-item",{staticStyle:{display:"flex"},attrs:{label:"Category url reference",prop:"slug"}},[a("el-input",{model:{value:t.newCategoryForm.slug,callback:function(e){t.$set(t.newCategoryForm,"slug",e)},expression:"newCategoryForm.slug"}})],1),a("el-form-item",{attrs:{label:"Category description",prop:"description"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.newCategoryForm.description,callback:function(e){t.$set(t.newCategoryForm,"description",e)},expression:"newCategoryForm.description"}})],1),a("el-form-item",{attrs:{label:"Category images"}},[a("ImageUpload",{on:{finishedUpload:function(e){return t.updateCategoryImages(e)}}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.$emit("discard")}}},[t._v("Discard")]),a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.createCategory("newCategoryForm")}}},[t._v("Create category")])],1)],1)],1)},V=[],X={props:["show"],components:{ImageUpload:K},data:function(){return{newCategoryFormRules:{name:[{required:!0,message:"Please choose a product name",trigger:"blur"},{max:14,message:"Category name must be less than 15 characters",trigger:"blur"}],slug:[{required:!0,message:"Please choose a url reference",trigger:"blur"},{min:3,max:20,message:"url reference must be between 3 and 20 characters",trigger:"blur"},{validator:this.validateSlug,message:"Url reference cannot contain white spaces",trigger:"blur"}],description:[{required:!0,message:"Please write a description",trigger:"blur"},{max:400,message:"description cannot be more than 400 characters",trigger:"blur"}]},newCategoryForm:{name:"",slug:"",description:"",images:[]}}},methods:{createCategory:function(t){var e=this;this.$refs[t].validate(function(a){a&&e.$axios.post("/categories",{name:e.newCategoryForm.name,description:e.newCategoryForm.description,slug:e.newCategoryForm.slug,images:e.newCategoryForm.images}).then(function(a){e.$emit("created",a.data),e.$message.success("Category created successfully. You can now select the category from the dropdown menu"),e.$refs[t].resetFields()}).catch(function(){e.$message.error("Whoops, something went wrong trying to create a new category. Please reload the page and try again, or contact the system administrator if issue persists.")})})},updateCategoryImages:function(t){this.newCategoryForm.images.push(t)}}},Z=X,tt=Object(u["a"])(Z,Q,V,!1,null,null,null),et=tt.exports,at={name:"new-product",components:{ImageUpload:K,NewCategoryForm:et},data:function(){return{showNewCategoryForm:!1,productForm:{name:"",description:"",slug:"",price:0,stock:0,weight:0,height:0,length:0,width:0,category:"",images:[],tmpDir:null},slugChanged:!1,errors:!1,categories:[],productFormRules:{name:[{required:!0,message:"Please choose a product name",trigger:"blur"},{min:5,max:31,message:"Product name must be between 5 and 30 characters",trigger:"blur"}],slug:[{required:!0,message:"Please choose a url reference",trigger:"blur"},{min:5,max:40,message:"url reference must be between 5 and 40 characters",trigger:"blur"},{validator:this.validateSlug,message:"Url reference cannot contain white spaces",trigger:"blur"}],description:[{required:!0,message:"Please write a description",trigger:"blur"}],price:[{required:!0,message:"Please choose a product price",trigger:"blur"}]},launchingProduct:!1}},mounted:function(){var t=this;this.$axios.get("/categories").then(function(e){t.categories=e.data}).catch(function(){t.$message.error("Whoops, error loading categories. Please contact the system administrator")})},methods:{autoCreateSlug:function(t){this.slugChanged||(this.slug=t.replace(/ /g,"-"))},handleExceed:function(t,e){this.$message.warning("The limit is 3, you selected ".concat(t.length," files this time, add up to ").concat(t.length+e.length," totally"))},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.errors=!0,!1;e.errors=!1;var a=e.productForm;e.launchingProduct=!0,e.$axios.post("/products",{content:{name:a.name,description:a.description,slug:a.slug,images:a.images},inventory:{price:a.price,totalStock:a.stock,inFulfillment:0},category:a.category}).then(function(){e.launchingProduct=!1,e.$message.success("Great! You launched a new product - "+a.name),e.$router.push("/products")}).catch(function(){e.launchingProduct=!1,e.$message.error("Whoops, something went wrong launching the product :(. Please check that you have filled out the form correctly and try again, then contact your system administrator")})})},createdCategory:function(t){this.categories.push(t),this.showNewCategoryForm=!1},discardProduct:function(){var t=this;this.$axios.delete("/images").then(function(){t.$router.push("/products")}).catch(function(){t.$message.warning("Warning: couldn't empty temporary image cache folder. This could cause issues in the future. Please make your system administrator aware of the issue."),t.$router.push("/products")})},updateProductImages:function(t){this.productForm.images.push(t)},validateSlug:function(t,e,a){e.indexOf(" ")>-1?a(new Error("Url reference cannot contain spaces")):a()}}},ot=at,nt=(a("5654"),Object(u["a"])(ot,z,B,!1,null,null,null)),rt=nt.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"new-product"},[t.product?a("div",[a("el-page-header",{attrs:{title:"back to all products",content:t.product.content.name},on:{back:function(e){return t.$router.push("/products")}}}),a("h1",{staticClass:"title title--primary"},[t._v(t._s(t.product.content.name))]),a("el-form",[a("el-form-item",{attrs:{label:"Category",prop:"category"}},[a("el-select",{attrs:{placeholder:"Select categories"},model:{value:t.product.category,callback:function(e){t.$set(t.product,"category",e)},expression:"product.category"}},t._l(t.categories,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t._id}})}),1),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.preventDefault(),t.update("category","category",t.product.category)}}},[t._v("Update category")]),a("el-button",{staticStyle:{"margin-left":"20px"},on:{click:function(e){e.preventDefault(),t.showNewCategoryForm=!0}}},[t._v("Or create a new category")])],1)],1),a("NewCategoryForm",{attrs:{show:t.showNewCategoryForm},on:{created:function(e){return t.createdCategory(e)},discard:function(e){t.showNewCategoryForm=!1}}}),a("h2",{staticClass:"title title--secondary"},[t._v("Images")]),t.product.content.images.length>0?a("el-carousel",{attrs:{height:"250px",autoplay:!1}},t._l(t.product.content.images,function(t,e){return a("el-carousel-item",{key:e},[a("img",{staticClass:"image",attrs:{src:t.path}})])}),1):a("PlaceholderImage",{attrs:{height:"250px"}}),a("ImageUpload",{on:{finishedUpload:function(t){}}}),a("h2",{staticClass:"title title--secondary"},[t._v("Price and promotions")]),t.changing.price?a("div",[a("el-form",{ref:"newPriceForm",attrs:{"label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:"New price"}},[t._v("\n                    £ "),a("el-input-number",{staticStyle:{width:"110px"},attrs:{max:25e3,precision:2,controls:!1,step:1},model:{value:t.product.inventory.price,callback:function(e){t.$set(t.product.inventory,"price",e)},expression:"product.inventory.price"}})],1),a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.update("price","inventory.price",t.product.inventory.price)}}},[t._v("Update price")]),a("el-button",{on:{click:function(e){t.changing.price=!1}}},[t._v("Cancel")])],1)],1):a("div",[a("p",[t._v("Product currently priced at  "),a("strong",{staticStyle:{"font-size":"1.1em",color:"#6d0000"}},[t._v("£"+t._s(t.product.inventory.price))])]),a("el-button",{on:{click:function(e){t.changing.price=!0}}},[t._v("Change price")])],1),a("p",[t._v("No promotions currently active on this product")]),a("router-link",{attrs:{to:"/promotions/new"}},[a("el-button",{attrs:{type:"primary"}},[t._v("Create a promotion")])],1),a("h2",[t._v("Inventory")]),a("el-table",{staticStyle:{width:"500px"},attrs:{data:t.inventoryData}},[a("el-table-column",{attrs:{prop:"total",label:"Total stock"}}),a("el-table-column",{attrs:{prop:"inFulfillment",label:"In fulfillment"}}),a("el-table-column",{attrs:{prop:"available",label:"Available stock"}})],1),a("router-link",{attrs:{to:"/inventory/new"}},[a("el-button",{attrs:{type:"primary"}},[t._v("Add or remove stock")])],1),t._m(0),a("h2",{staticClass:"title title--secondary"},[t._v("Orders")])],1):t._e()])},it=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("Note that "),a("strong",[t._v("total stock")]),t._v(" refers to all physical stock, including stock that is in placed orders that haven't yet been shipped. "),a("strong",[t._v("In fulfillment")]),t._v(" refers to stock in orders that have been placed, but haven't been shipped yet. "),a("strong",[t._v("Available stock")]),t._v(" refers to the remaining stock which is actually available to be ordered - this is the number shown on the public facing site.")])}],lt={name:"product",props:["id"],components:{NewCategoryForm:et},data:function(){return{changing:{price:!1,name:!1,category:!1,stock:!1},categories:[],showNewCategoryForm:!1,product:null}},computed:{inventoryData:function(){return[{total:this.product.inventory.totalStock,available:this.product.inventory.totalStock-this.product.inventory.inFulfillment,inFulfillment:this.product.inventory.inFulfillment}]}},mounted:function(){var t=this;24!==this.id.length?(this.$router.push("/products"),this.$message.error("Whoops, that product doesn't seem to exist. Redirecting to products page.")):(this.$emit("set-loading"),this.$axios.get("/products/"+this.id).then(function(e){t.product=e.data,t.$emit("stop-loading"),t.$axios.get("/categories").then(function(e){t.categories=e.data}).catch(function(){t.$message.error("Whoops, error loading categories. Please contact the system administrator")})}).catch(function(){t.$router.push("/products"),t.$message.error("Whoops, looks like that product doesn't exist. Redirecting to products page."),t.$emit("stop-loading")}))},methods:{update:function(t,e,a){var o=this;this.$axios.put("/products/"+this.product._id,{toUpdate:e,updateWith:a}).then(function(){o.$message.success(t+" successfully updated. All new orders will use the updated price."),o.changing[t]=!1}).catch(function(){o.$message.error("Error updating "+t+". Please contact your system administrator.")})},createdCategory:function(t){this.categories.push(t),this.showNewCategoryForm=!1}}},ct=lt,ut=(a("1b69"),Object(u["a"])(ct,st,it,!1,null,"08cba3a9",null)),dt=ut.exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"inventory"},[a("h1",{staticClass:"title title--primary"},[t._v("Stock Management")]),a("router-link",{attrs:{to:"/inventory/new"}},[a("el-button",{attrs:{rounded:"",type:"success"}},[t._v("New Stock Update")])],1),a("h2",{staticClass:"title title--secondary"},[t._v("Stock update history")]),a("p",[t._v("Filter")]),a("div",{staticClass:"options"},[a("div",{staticClass:"filters"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"Type"}},[a("el-select",{staticStyle:{width:"800px"},attrs:{multiple:"",placeholder:"Select type"},model:{value:t.selectedReasons,callback:function(e){t.selectedReasons=e},expression:"selectedReasons"}},t._l(t.reasons,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}),1)],1),a("el-form-item",{attrs:{label:"Date range"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"To","start-placeholder":"Start date","end-placeholder":"End date"},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}}),a("el-button",{on:{click:function(e){t.dateRange=[Date.now()-24192e5,Date.now()]}}},[t._v("Reset")])],1)],1)],1)]),a("el-table",{attrs:{data:t.adjustmentsComputed,"row-class-name":t.getRowClasses,"default-sort":{prop:"datetime",order:"descending"}}},[a("el-table-column",{attrs:{prop:"datetime",label:"Created"}}),a("el-table-column",{attrs:{label:"Type"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",["Delivery"===e.row.reason?a("i",{staticClass:"el-icon-truck",staticStyle:{"font-size":"25px","margin-right":"5px"}}):t._e(),t._v(t._s(e.row.reason))])]}}])}),a("el-table-column",{attrs:{label:"Products updated"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.products.slice(0,6),function(o,n){return a("span",{key:n},[t._v(t._s(o.name)+" "),n<e.row.products.slice(0,6).length-1?a("span",[t._v(", ")]):t._e()])})}}])}),a("el-table-column",{attrs:{label:"Notes"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.notes.slice(0,100))+"\n                "),e.row.notes.length>100?a("span",[t._v("...")]):t._e()]}}])})],1),a("el-pagination",{attrs:{layout:"prev, pager, next","hide-on-single-page":!0,"page-count":t.totalPages},on:{"current-change":function(e){t.page=e-1}}})],1)},mt=[],ht={name:"inventory",data:function(){return{adjustments:[],reasons:["Delivery","Counting error","Sale(s) through untracked avenue","Defective/damaged product(s)","Loss/theft"],selectedReasons:["Delivery","Counting error","Sale(s) through untracked avenue","Defective/damaged product(s)","Loss/theft"],page:0,dateRange:[Date.now()-24192e5,Date.now()],totalPages:1}},mounted:function(){this.$emit("set-loading"),this.getAdjustments()},watch:{page:function(){this.getAdjustments()},dateRange:function(){this.getAdjustments(),this.page=0},selectedReasons:function(){this.getAdjustments(),this.page=0}},computed:{adjustmentsComputed:function(){return this.adjustments.map(function(t){var e=new Date(t.datetime);return t.datetime=e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear(),t})}},methods:{getRowClasses:function(t){var e=t.row;t.rowIndex;return"increase"===e.type?"row-increase":"row-decrease"},getAdjustments:function(){var t=this;this.adjustments=[];var e="?page="+this.page;this.selectedReasons.forEach(function(t){e=e+"&reason="+t}),e=e+"&daterange="+new Date(this.dateRange[0]).getTime()+"&daterange="+new Date(this.dateRange[1]).getTime(),this.$axios.get("/inventory"+e).then(function(e){window.document.getElementsByClassName("el-main")[0].scroll(0,0),t.adjustments=e.data.adjustments,t.totalPages=e.data.pages,t.$emit("stop-loading")}).catch(function(){t.$message.error("Error loading stock adjustment database. Please contact your system administrator."),t.$emit("stop-loading")})}}},gt=ht,ft=(a("955f"),Object(u["a"])(gt,pt,mt,!1,null,null,null)),yt=ft.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"new-stock-adjustment"},[a("el-page-header",{attrs:{title:"back to stock management",content:"New stock update"},on:{back:function(e){return t.$router.push("/inventory")}}}),a("h1",{staticClass:"title title--primary"},[t._v("New stock update")]),a("p",[t._v("Submit a manual increase or decrease of stock. Stock updates are recorded to the database to easily keep track of what's happening to your inventory.")]),a("el-form",{ref:"form",attrs:{"label-position":"top",model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"Adjument date"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"Select date and time"},model:{value:t.form.datetime,callback:function(e){t.$set(t.form,"datetime",e)},expression:"form.datetime"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:function(e){t.form.datetime=Date.now()}}},[t._v("Reset date and time to now")])],1),a("el-form-item",{attrs:{label:"Update type"}},[a("el-radio",{attrs:{label:"increase"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("i",{staticClass:"el-icon-sell"}),t._v("  Increase")]),a("el-radio",{attrs:{label:"decrease"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("i",{staticClass:"el-icon-sold-out"}),t._v("  Reduction")])],1),a("el-form-item",{attrs:{label:"Reason for update"}},[a("el-select",{attrs:{placeholder:"Select reason"},model:{value:t.form.reason,callback:function(e){t.$set(t.form,"reason",e)},expression:"form.reason"}},t._l(t.reasons[t.form.type],function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}),1)],1),a("el-divider"),a("el-form-item",{attrs:{label:"Add products to be adjusted"}},[t.toAdjust?t._e():a("el-select",{staticClass:"product-select",attrs:{placeholder:"Select a product"},model:{value:t.toAdjust,callback:function(e){t.toAdjust=e},expression:"toAdjust"}},t._l(t.availableProducts,function(t){return a("el-option",{key:t._id,attrs:{label:t.content.name,value:t}})}),1),a("el-collapse-transition",[t.toAdjust?a("el-form",{staticClass:"product-form"},[t.toAdjust?a("h3",[t._v(t._s(t.toAdjust.content.name))]):t._e(),a("el-form-item",{attrs:{label:"increase"===t.form.type?"Increase stock by":"Reduce stock by"}},["increase"===t.form.type?a("el-input-number",{attrs:{min:1,step:1},model:{value:t.adjustBy,callback:function(e){t.adjustBy=e},expression:"adjustBy"}}):a("el-input-number",{attrs:{min:1,max:t.toAdjust.inventory.totalStock,step:1},model:{value:t.adjustBy,callback:function(e){t.adjustBy=e},expression:"adjustBy"}})],1),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.confirmProductAdjustment()}}},[t._v("Add")]),a("el-button",{on:{click:function(e){t.toAdjust=null}}},[t._v("Cancel")])],1):t._e()],1),a("el-table",{staticStyle:{width:"1101px"},attrs:{data:t.productTableComputed,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"Product",width:"200px"}}),a("el-table-column",{attrs:{prop:"currentStock",label:"Current total stock count",width:"200px"}}),a("el-table-column",{attrs:{label:"Change",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s("increase"===t.form.type?"+ "+e.row.change:"- "+e.row.change)+"\n                    ")]}}])}),a("el-table-column",{attrs:{label:"New total stock count",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.newStock>=0?e.row.newStock:0))])]}}])}),a("el-table-column",{attrs:{label:"New available stock count",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{style:{color:e.row.newAvailableStock<0?"red":"#000"}},[t._v(t._s(e.row.newAvailableStock))])]}}])}),a("el-table-column",{attrs:{width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.removeProduct(e.$index)}}},[t._v("Delete "),a("i",{staticClass:"el-icon-delete"})])]}}])})],1)],1),a("el-divider"),a("el-form-item",{attrs:{label:"Update notes - record any relevant information about the delivery or reduction of stock"}},[a("el-input",{attrs:{type:"textarea",maxlength:400},model:{value:t.form.notes,callback:function(e){t.$set(t.form,"notes",e)},expression:"form.notes"}})],1),t.error?a("el-alert",{attrs:{title:"Whoops",description:"Looks like you haven't added any products to the update",type:"error","show-icon":""}}):t._e(),a("el-button",{attrs:{type:"success"},on:{click:t.formSubmit}},[t._v("Apply update")])],1)],1)},bt=[],wt={name:"new-stock-adjustment",data:function(){return{form:{datetime:Date.now(),type:"increase",reason:"",products:[],notes:""},productTable:[],reasons:{increase:["Delivery","Counting error"],decrease:["Sale(s) through untracked avenue","Defective/damaged product(s)","Loss/theft","Counting error"]},rules:{formRules:{}},products:[],showProductAdjustmentForm:!1,toAdjust:null,adjustBy:1,potentialStockIssue:!1,error:!1}},computed:{availableProducts:function(){return this.products.filter(function(t){return!1===t.used})},productTableComputed:function(){var t=this;return this.productTable.map(function(e){var a="increase"===t.form.type?1:-1;return e.newStock=e.currentStock+e.change*a,e.newAvailableStock=e.currentAvailableStock+e.change*a,t.potentialStockIssue=e.newAvailableStock<0,e})}},watch:{potentialStockIssue:function(t){t&&this.stockWarning()},"form.type":function(t){this.form.reason="increase"===t?"Delivery":"Sale(s) through untracked avenue"}},mounted:function(){var t=this;this.$emit("set-loading"),this.$axios({method:"get",url:"/products"}).then(function(e){t.products=e.data.products.map(function(t){return t.used=!1,t}),t.form.reason="increase"===t.form.type?"Delivery":"Sale(s) through untracked avenue",t.$emit("stop-loading")}).catch(function(){t.$message.error("Error loading products. Please contact system administrator"),t.$emit("stop-loading")})},methods:{confirmProductAdjustment:function(){this.products[this.products.indexOf(this.toAdjust)].used=!0,this.form.products.push({id:this.toAdjust._id,name:this.toAdjust.content.name,previousTotalStock:this.toAdjust.inventory.totalStock,previousAvailableStock:this.toAdjust.inventory.totalStock-this.toAdjust.inventory.inFulfillment,change:this.adjustBy}),this.productTable.push({name:this.toAdjust.content.name,change:this.adjustBy,currentStock:this.toAdjust.inventory.totalStock,currentAvailableStock:this.toAdjust.inventory.totalStock-this.toAdjust.inventory.inFulfillment}),this.toAdjust=null},removeProduct:function(t){var e=this;console.log("removing"),console.log(t),this.products=this.products.map(function(a){return a._id===e.form.products[t].id&&(a.used=!1),a}),this.form.products.splice(t,1),this.productTable.splice(t,1),console.log(this.productTable)},stockWarning:function(){this.$alert("<p>Hey. Looks like you've requested a stock reduction which will leave you unable to fulfill pending, paid orders. If you inserted these numbers by mistake, you can dismiss this message. If not, you might want to review the currently outstanding orders, and cancel them if you are unable to fulfill them.</p><p><router-link to='/orders'</router-link></p>","Potential stock issue",{confirmButtonText:"Dismiss",dangerouslyUseHTMLString:!0})},formSubmit:function(){var t=this;if(0===this.form.products.length)this.error=!0;else{var e=this.form;e.datetime=new Date(e.datetime),e.products.forEach(function(t){var a="increase"===e.type?1:-1;t.newTotalStock=t.previousTotalStock+t.change*a,t.newAvailableStock=t.previousTotalStock+t.change*a}),this.$axios.post("/inventory",e).then(function(e){t.$message.success("Executed new stock adjustment - requested stock levels have been adjusted, and changes recorded"),t.$router.push("/inventory")}).catch(function(){t.$message.error("Error adjusting stock. Please ensure form has been filled out correctly, and try reloading the page. If issue persists, contact your system administrator.")})}}}},_t=wt,kt=(a("502a"),Object(u["a"])(_t,vt,bt,!1,null,"13717cb1",null)),Ct=kt.exports,xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"orders"},[a("h1",{staticClass:"title title--primary"},[t._v("Orders")]),a("el-table",{attrs:{data:t.orders,striped:""}},[a("el-table-column",{attrs:{prop:"date",label:"Order placed",width:"155px"}}),a("el-table-column",{attrs:{label:"Customer",width:"220px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.fulfillment.shippingAddress.firstName)+" "+t._s(e.row.fulfillment.shippingAddress.lastName))])]}}])}),a("el-table-column",{attrs:{prop:"numOfItems",label:"No. of items",width:"130px"}}),a("el-table-column",{attrs:{label:"Subtotal",width:"130px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("£"+t._s(e.row.costs.subtotal))])]}}])}),a("el-table-column",{attrs:{label:"Shipping method",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.fulfillment.shippingMethod.name)+" - £"+t._s(e.row.costs.shipping))])]}}])}),a("el-table-column",{attrs:{label:"Total paid",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("£"+t._s(e.row.costs.grandTotal))])]}}])}),a("el-table-column",{attrs:{label:"Payment",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{staticStyle:{margin:"4px 0"}},["card"===e.row.payment.method&&e.row.payment.paymentCard.last4?a("span",[t._v(t._s(e.row.payment.paymentCard.brand)+" card ending "+t._s(e.row.payment.paymentCard.last4))]):"card"===e.row.payment.method?a("span",[t._v("Card - details unconfirmed")]):a("span",[t._v("Manual payment - cash or other")])]),a("p",{staticClass:"payment-status",class:{pending:"pending"===e.row.payment.paymentStatus,paid:"paid"===e.row.payment.paymentStatus}},[t._v("\n                    "+t._s(e.row.payment.paymentStatus)+"\n                ")])]}}])}),a("el-table-column",{attrs:{label:"Order status",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"order-status",class:{action:"Awaiting fulfillment"===e.row.fulfillment.orderStatus}},[t._v(t._s(e.row.fulfillment.orderStatus))]),"Awaiting fulfillment"===e.row.fulfillment.orderStatus?a("span",[t._v(t._s(e.row.timeRemaining)+" until fulfillment deadline")]):t._e()]}}])})],1),a("el-pagination",{attrs:{layout:"prev, pager, next","hide-on-single-page":!0,"page-count":t.totalPages},on:{"current-change":function(e){t.page=e-1}}})],1)},$t=[],St={name:"orders",data:function(){return{ordersRaw:[],activeNames:["1"],page:0,totalPages:null}},computed:{orders:function(){return this.ordersRaw.map(function(t){var e=new Date(t.date);t.date=e.getHours()+":"+e.getMinutes()+" "+(e.getMonth()+1)+"/"+e.getDate()+"/"+e.getFullYear();var a=t.fulfillment.shippingAddress,o=a.address;if(a.flatNumber&&(o=a.flatNumber+", "+o),a.company&&(o=a.company+", "+o),t.shippingAddress=a.firstName+" "+a.lastName+", "+o+", "+a.postcode+", "+a.city+", "+a.country.name,t.numOfItems=t.items.reduce(function(t,e){return t+e.quantity},0),"Awaiting fulfillment"===t.fulfillment.orderStatus){var n=e.getTime()+36e5*t.fulfillment.shippingMethod.targetHours,r=n-Date.now();Math.abs(r)>36e5?t.timeRemaining=Math.floor(r/36e5)+" hours":t.timeRemaining=Math.floor(r/6e4)+" minutes"}return t})}},watch:{page:function(){this.getOrders()}},mounted:function(){this.$emit("set-loading"),this.getOrders()},methods:{getOrders:function(){var t=this,e="?page="+this.page;this.$axios.get("/orders"+e).then(function(e){console.log(e),t.ordersRaw=e.data.orders,t.totalPages=e.data.pages,window.document.getElementsByClassName("el-main")[0].scroll(0,0),t.$emit("stop-loading")}).catch(function(){t.$message.error("Error loading orders. Please contact your system administrator"),t.$emit("stop-loading")})}}},Pt=St,Ft=(a("66f4"),Object(u["a"])(Pt,xt,$t,!1,null,"4eed1929",null)),jt=Ft.exports,At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fulfillment-wizard"},[a("h1",{staticClass:"title title--primary"},[t._v("Fulfillment Wizard")]),a("p",[t._v("You have "+t._s(t.orders.length)+" orders awaiting fulfillment, of which "+t._s(t.urgentCount)+" are urgent. Get started now!")]),a("ul",t._l(t.orders,function(e,o){return a("li",{key:o},[t._v("\n            "+t._s(e.customer.email)+", "+t._s(e.timeRemaining)+"\n        ")])}),0)])},Dt=[],Nt={name:"fulfillment",data:function(){return{orders:[],urgentCount:5}},mounted:function(){var t=this;this.$emit("set-loading"),this.$axios.get("/orders/fulfillment").then(function(e){t.orders=e.data.orders,t.$emit("stop-loading")}).catch(function(){t.$message.error("Error loading fulfillment wizard. Please contact your system administrator. For urgent order management, please use the All Orders page."),t.$emit("stop-loading")})}},Et=Nt,Ot=Object(u["a"])(Et,At,Dt,!1,null,null,null),Rt=Ot.exports,Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setup"},[a("h1",{staticClass:"title title--primary"},[t._v("Setup")]),a("el-row",{staticStyle:{"max-width":"1200px"}},[a("el-col",{attrs:{span:8}},[a("router-link",{attrs:{to:"/setup/shipping"}},[a("div",{staticClass:"grid-content"},[a("i",{staticClass:"el-icon-truck"}),a("div",[t._v("\n                        Shipping\n                        "),a("p",[t._v("Manage how you ship orders to customers")])])])])],1),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[a("i",{staticClass:"el-icon-bank-card"}),a("div",[t._v("\n                    Payment Providers\n                    "),a("p",[t._v("Take control of how your users pay for their purchases")])])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[a("i",{staticClass:"el-icon-coin"}),a("div",[t._v("\n                    Currencies\n                    "),a("p",[t._v("Take your business global by adding additional currencies")])])])])],1)],1)},It=[],Mt=(a("3a4f"),{}),Ut=Object(u["a"])(Mt,Tt,It,!1,null,null,null),Lt=Ut.exports,Wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shipping"},[a("el-page-header",{attrs:{title:"Setup",content:"Shipping"},on:{back:function(e){return t.$router.push("/setup")}}}),a("h1",{staticClass:"title title--primary"},[t._v("Shipping")]),a("h2",{staticClass:"title title--secondary"},[t._v("Shipping methods")]),a("el-table",{attrs:{data:t.methods}},[a("el-table-column",{attrs:{prop:"name",label:"Name",width:"200px"}}),a("el-table-column",{attrs:{label:"Cost",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("£"+t._s(e.row.cost.toFixed(2)))])]}}])}),a("el-table-column",{attrs:{label:"Estimated delivery time",width:"220px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.days[0])+"-"+t._s(e.row.days[1])+" days")])]}}])}),a("el-table-column",{attrs:{label:"Target fulfillment time",width:"220px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.targetHours)+" hours")])]}}])}),a("el-table-column",{attrs:{width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-delete-solid",staticStyle:{color:"#f56c6c",cursor:"pointer","font-size":"1.3em"},on:{click:function(e){t.deleting=!0}}}),a("el-dialog",{attrs:{visible:t.deleting,width:"30%"},on:{"update:visible":function(e){t.deleting=e}}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("Permenantly delete "),a("strong",[t._v(t._s(e.row.name))]),t._v("?")]),a("span",[t._v("Are you sure you want to delete this shipping method?")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.deleting=!1}}},[t._v("Cancel")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.deleteMethod(e.row._id,e.$index)}}},[t._v("Delete")])],1)])]}}])})],1),a("router-link",{attrs:{to:"/setup/shipping/new"}},[a("el-button",{attrs:{type:"primary"}},[t._v("New shipping method")])],1),a("h2",{staticClass:"title title--secondary",staticStyle:{margin:"50px 0 10px 0"}},[t._v("Shipping days")]),a("el-form",{attrs:{"label-position":"top"}},[a("el-form-item",{attrs:{label:"Select the days on which you are fulfilling orders (affects calculation of fulfillment targets and estimated delivery dates)."}},[a("el-checkbox-group",{model:{value:t.shippingDays,callback:function(e){t.shippingDays=e},expression:"shippingDays"}},[a("el-checkbox",{attrs:{label:"Monday"}}),a("el-checkbox",{attrs:{label:"Tuesday"}}),a("el-checkbox",{attrs:{label:"Wednesday"}}),a("el-checkbox",{attrs:{label:"Thursday"}}),a("el-checkbox",{attrs:{label:"Friday"}}),a("el-checkbox",{attrs:{label:"Saturday"}}),a("el-checkbox",{attrs:{label:"Sunday"}})],1)],1),a("el-button",{attrs:{type:"success"}},[t._v("Save changes")])],1)],1)},zt=[],Bt={name:"shipping",data:function(){return{shippingDays:["Monday","Tuesday","Wednesday","Thursday","Friday"],methods:[],deleting:!1}},mounted:function(){var t=this;this.$emit("set-loading"),this.$axios.get("/shipping-methods").then(function(e){t.methods=e.data.methods,t.$emit("stop-loading")}).catch(function(){t.$message.error("Failed to load shipping methods. Please contact your system administrator."),t.$emit("stop-loading")})},methods:{deleteMethod:function(t,e){var a=this;this.$axios.delete("/shipping-methods/"+t).then(function(){a.$message.success("Permenantly deleted shipping method - this method is no longer available in the checkout process"),a.methods.splice(e,1)}).catch(function(){a.$message.error("Error deleting shipping method. Please contact your system administrator.")})}}},qt=Bt,Ht=(a("0b3a"),Object(u["a"])(qt,Wt,zt,!1,null,"29d93d4a",null)),Yt=Ht.exports,Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"new-shipping-method"},[a("el-page-header",{attrs:{title:"Shipping",content:"New Shipping Method"},on:{back:function(e){return t.$router.push("/setup/shipping")}}}),a("h1",{staticClass:"title title--primary"},[t._v("New Shipping Method")]),a("el-form",{attrs:{model:t.method,"label-position":"top"}},[a("el-form-item",{attrs:{label:"Short description of the method"}},[a("el-input",{attrs:{placeholder:"eg. DHL Express Delivery"},model:{value:t.method.name,callback:function(e){t.$set(t.method,"name",e)},expression:"method.name"}})],1),a("el-form-item",[a("label",{staticClass:"el-form-item__label"},[t._v("Estimated delivery time range")]),a("el-slider",{attrs:{range:"",step:1,max:15},model:{value:t.method.days,callback:function(e){t.$set(t.method,"days",e)},expression:"method.days"}}),a("p",{staticStyle:{color:"#666",margin:"0"}},[t._v(t._s(t.method.days[0])+" - "+t._s(t.method.days[1])+" business days")])],1),a("el-form-item",{attrs:{label:"Shipping method cost"}},[t._v("\n            £ "),a("el-input-number",{model:{value:t.method.cost,callback:function(e){t.$set(t.method,"cost",e)},expression:"method.cost"}})],1),a("h4",{staticStyle:{"font-weight":"600"}},[t._v("Example preview")]),a("p",{staticStyle:{"font-size":"0.8em"}},[t._v('"'+t._s(t.method.name)+", "+t._s(t.method.days[0])+" - "+t._s(t.method.days[1])+" business days - £"+t._s(t.method.cost.toFixed(2))+'"')]),a("el-divider"),a("el-form-item",{attrs:{label:"Fulfillment target - how quickly do you aim to fulfill orders placed with this delivery method?"}},[t._v("\n            Within   "),a("el-input-number",{attrs:{min:1,max:96},model:{value:t.method.targetHours,callback:function(e){t.$set(t.method,"targetHours",e)},expression:"method.targetHours"}}),t._v("  hours of order being placed\n        ")],1),a("el-divider"),a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.newShippingMethod()}}},[t._v("Create shipping method")])],1)],1)},Jt=[],Kt={name:"new-shipping-method",data:function(){return{method:{name:"",days:[2,3],cost:3,targetHours:24}}},methods:{newShippingMethod:function(){var t=this;this.$axios.post("/shipping-methods",this.method).then(function(){t.$message.success("Successfully created new shipping method"),t.$router.push("/setup/shipping")}).catch(function(){t.$message.error("Error creating new shipping method. Please try again, then contact your system administrator if problem persists.")})}}},Qt=Kt,Vt=(a("ad80"),Object(u["a"])(Qt,Gt,Jt,!1,null,"1082fc9d",null)),Xt=Vt.exports,Zt=a("bc3a"),te=a.n(Zt);o["default"].use(y["a"]);var ee=new y["a"]({mode:"history",base:"/admin/",routes:[{path:"/",name:"dashboard",component:C},{path:"/products",name:"products",component:W},{path:"/products/new",name:"newProduct",component:rt},{path:"/products/:id",component:dt,props:!0},{path:"/inventory",name:"inventory",component:yt},{path:"/inventory/new",name:"new stock adjustment",component:Ct},{path:"/orders",name:"orders",component:jt},{path:"/fulfillment",name:"fulfillment",component:Rt},{path:"/setup",name:"setup",component:Lt},{path:"/setup/shipping",name:"shipping-setup",component:Yt},{path:"/setup/shipping/new",name:"new-shipping-method",component:Xt}],methods:{setData:function(t,e){t?this.error=t.message:this.product=e}}}),ae=a("5c96"),oe=a.n(ae),ne=(a("0fae"),a("b2d6")),re=a.n(ne);o["default"].use(oe.a,{locale:re.a});var se=te.a.create({baseURL:"/api/admin/"});o["default"].prototype.$axios=se,o["default"].config.productionTip=!1,new o["default"]({router:ee,render:function(t){return t(f)}}).$mount("#app")},5746:function(t,e,a){},5763:function(t,e,a){"use strict";var o=a("d695"),n=a.n(o);n.a},"5c0b":function(t,e,a){"use strict";var o=a("5e27"),n=a.n(o);n.a},"5e27":function(t,e,a){},"66f4":function(t,e,a){"use strict";var o=a("34bd"),n=a.n(o);n.a},"764c":function(t,e,a){"use strict";var o=a("fe4a"),n=a.n(o);n.a},"8f1c":function(t,e,a){},"955f":function(t,e,a){"use strict";var o=a("8f1c"),n=a.n(o);n.a},ad80:function(t,e,a){"use strict";var o=a("b56f"),n=a.n(o);n.a},b56f:function(t,e,a){},b688:function(t,e,a){},cc19:function(t,e,a){},d695:function(t,e,a){},f359:function(t,e,a){},fda6:function(t,e,a){},fe4a:function(t,e,a){}});
//# sourceMappingURL=app.446cdebe.js.map